(function () {
    const createButton = (text, top, callback) => {
        const button = document.createElement('button');
        button.textContent = text;
        Object.assign(button.style, {
            position: 'fixed', top, left: '500px', zIndex: '9999', padding: '10px 10px',
            border: 'none', borderRadius: '20px', cursor: 'pointer', backgroundColor: 'transparent', color: 'green'
        });
        document.body.appendChild(button);
        button.addEventListener('click', callback);
    };

    const links = document.querySelectorAll(".item a");
    let currentIndex = 0;

    const checkForSubmitSuccess = () => document.body.innerText.includes("Submit success");

    const clickNextLink = () => {
        if (currentIndex < links.length) {
            links[currentIndex++].click();
            setTimeout(() => {
                const intervalId = setInterval(() => {
                    if (checkForSubmitSuccess()) {
                        clearInterval(intervalId);
                        clickNextLink();
                    }
                }, 1000);
            }, 3000);
        }
    };

    createButton('Skip Me', '350px', () => {
        if (currentIndex < links.length) {
            const nextIndex = currentIndex;  // Save current index before incrementing
            currentIndex++;
            if (nextIndex < links.length) {
                links[nextIndex].click();
                setTimeout(() => {
                    const intervalId = setInterval(() => {
                        if (checkForSubmitSuccess()) {
                            clearInterval(intervalId);
                            clickNextLink();
                        }
                    }, 1000);
                }, 3000);
            }
        }
    });

    clickNextLink();
})();
