(function() {
    const btnStyle = {
        position: 'fixed', left: '30px', zIndex: '9999', backgroundColor: '#28a745', color: 'white', padding: '15px 30px', border: 'none', borderRadius: '20px', cursor: 'pointer', fontSize: '16px', width: '200px', textAlign: 'center'
    };

    const createButton = (text, top, buttonAction) => {
        const button = document.createElement('button');
        button.textContent = text;
        Object.assign(button.style, {...btnStyle, top});
        document.body.appendChild(button);
        button.addEventListener('click', buttonAction);
        return button;
    };

    const changeButtonColor = (button) => {
        button.style.backgroundColor = 'white';
        button.style.color = '#007BFF';
        setTimeout(() => {
            button.style.backgroundColor = '#28a745';
            button.style.color = 'white';
        }, 3000);
    };

    const pasteClipboard = async (inputSelector, enterSelector) => {
        try {
            const inputField = document.querySelector(inputSelector);
            if (!inputField) return;
            inputField.click();
            inputField.value = await navigator.clipboard.readText();
            inputField.dispatchEvent(new Event('input', {bubbles: true}));
            inputField.dispatchEvent(new Event('change', {bubbles: true}));

            const enterButton = document.querySelector(enterSelector);
            enterButton?.click();
        } catch (err) {
            console.error('Error:', err);
        }
    };

    createButton('Paste Title', '120px', async () => {
        changeButtonColor(event.target);
        await pasteClipboard('.ivu-input-wrapper:nth-child(1) > .ivu-input', '.ivu-input-wrapper:nth-child(2) > .ivu-btn-primary');
    });

    createButton('Paste Keyword', '180px', async () => {
        changeButtonColor(event.target);
        await pasteClipboard('.ivu-input-wrapper:nth-child(2) > .ivu-input', '.ivu-btn-primary');
    });
})();
